{# templates/index.html.twig #}
{% extends 'admin/layout.html.twig' %}

{% block contenu %}
<!--MENU ETAPES -->


<h2>{{ horaires|length }} Horaire(s)</h2>

<!-- Button trigger modal -->
<button type="button" class="float-right btn btn-sm btn-info btn-bold" data-toggle="modal" data-target="#dataModal-ajoute" id="modal-ajoute">
  <i data-feather="plus"></i> Ajouter un horaire
</button>

<!-- Modal-Ajoute -->
<div class="modal fade" id="dataModal-ajoute" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
      	<h5 class="modal-title" id="modal-ajoute-title"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="modal-ajoute-detail">
      </div>
    </div>
  </div>
</div>



<table class="table table-striped table-sm" id="myTable">
  <thead>
    <tr>
      <th scope="col">Heure</th>
      <th scope="col" width="80px">action</th>
    </tr>
  </thead>
  <tbody>
	{% for horaire in horaires %}
	<tr>
		<td>{{ horaire.heure|date('H:i') }}</td>
		<td>
			<!-- Modal Edit-->
			<button type="button" class="btn btn-sm btn-info btn-bold modal-edit" data-toggle="modal" data-target="#dataModal-edit" data-href="{{ path('app_admin_parametrage_horaires_modifie', {'id': horaire.id}) }}">
			  <i data-feather="edit"></i>
			</button>
			<button type="button" class="btn btn-sm btn-danger btn-bold modal-suppr" data-toggle="modal" data-target="#dataModal-suppr" data-href="{{ path('app_admin_parametrage_horaires_supprime', {'id': horaire.id}) }}">
			  <i data-feather="trash"></i>
			</button>


		</td>
	</tr>
	{% endfor %}
  </tbody>
</table>


<!-- Modal-Modifie -->
<div class="modal fade" id="dataModal-edit" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
      	<h5 class="modal-title" id="modal-edit-title"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="modal-edit-detail">
      </div>
    </div>
  </div>
</div>

<!-- Modal-Supprime -->
<div class="modal fade" id="dataModal-suppr" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
      	<h5 class="modal-title" id="modal-suppr-title"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="modal-suppr-detail">
      	Etes-vous sur de vouloir effacer cet horaire ?<br />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-primary btn-ok">Confirmer</button>
      </div>
    </div>
  </div>
</div>


{% endblock %}




{% block scriptadmin %}
<script type="text/javascript">
$(document).ready(function () {
    $('#modal-ajoute').click(function () {
        $('#modal-ajoute-title').html("Ajoute Horaire");
        var url = '{{ path('app_admin_parametrage_horaires_ajoute') }}';
        $.ajax({
            type: 'get',
            url: url,
            success: function (data) {
                $('#modal-ajoute-detail').html(data);
                $('#dataModal-ajoute').modal("show");
            }
        });
    });
    $('.modal-edit').click(function () {
        $('#modal-edit-title').html("Modifie Horaire");

        var url = $(this).attr("data-href");
        $.ajax({
            type: 'get',
            url: url,
            success: function (data) {
                $('#modal-edit-detail').html(data);
                $('#dataModal-edit').modal("show");
            }
        });
    });
	$('.modal-suppr').click(function () {
        $('#modal-suppr-title').html("Supprime Horaire");
        var url = $(this).attr("data-href");

        $('.btn-ok').click(function() {
	        $.ajax({
	            type: 'post',
	            url: url,
	            success: function (data) {
	                $('#modal-suppr-detail').html("Supprimer cet horaire ?");
	                $('#dataModal-suppr').modal("hide");
	                location.reload();
	            }
	        });
	    });
    });


});
</script>
{% endblock %}

